title: java-I/O-2
date: 2015-11-30 14:17:03
tags: JavaIO
---

## 1.2 Java 的 I/O演进(2)
在JDK1.4退出JavaNIO 之前，基于Java的所有Socket通信都采用了同步阻塞模式（BIO），这种一请求一应答的通信模型简化了上层的阴功开发，但是在性能和可靠性方面却存在着巨大的瓶颈。因此，在很长一段时间里，大型的应用服务器都采用C或者C++语言开发，因为他们可以直接使用操作系统提供的异步I/O或者AIO能力。当并发访问量增大、响应时间延迟增大之后，采用Java BIO开发的服务端软件只能通过硬件的不断扩容来满足高并发和低延迟。
    
正是由于Java传统BIO的劣势，才使得Java支持非阻塞I/O的呼声渐高，最终JDK1.4版本中提供了新的NIO类库。
    
### Java的I/O简史
2002年发布的JDK1.4时，NIO以JSR-51的身份正是随着JDK发布。它增加了java.nio包，提供了很多进行异步I/O开发的API和类库，主要的接口如下：
* 进行异步I/O操作的缓冲区ByteBuffer；
* 进行异步I/O操作的管道Pipe；
* 进行各种I/O操作（异步或同步）的Channel，包括ServerSocketChannel和SocketChannel；
* 多种字符集的编码能力和解码能力；
* 实现非阻塞I/O操作的多路复用器Selector；
* 基于流行了Perl实现正则表达式类库；
* 文件通道FileChannel。
    
新的NIO类库的提供，极大地促进了基于Java的异步非阻塞编程的发展和应用，但是，它依然有不完善的地方，特别是对文件系统的处理能力仍显不足，主要问题如下：
* 没有统一的文件属性；
* API能力比较弱，例如目录的级联创建和递归遍历，往往需要自己实现；
* 底层存储系统的一些高级API无法使用；
* 所有的文件操作都是同步阻塞调用，不支持异步文件读写操作。
     
2011年7月28日，JDK1.7 正是发布。它的一个比较大亮点就是将原来的NIO类库进行了升级，被称为NIO2.0，有JSR-203演进而来，它主要提供了如下三个方面的改进。
* 提供能够批量获取文件属性的API，这些API具有平台无关性，不与特性的文件系统耦合，另外它还提供了标准文件系统的SPI，供各个服务提供商扩展实现；
* 提供AIO功能，支持基于文件的异步I/O操作和针对网络套接字的异步操作；
* 完成JSR-51 定义的通道功能，包括对配置和多播数据包的支持等。

